pipeline {
   agent any



   stages {
       stage('Dependencies') {
           steps {
       
               sh 'npm install cypress --save-dev'
           }
       }
       stage('e2e Tests') {
           steps {
               sh 'npx cypress run'
           }
       }
       stage('Deploy') {
           steps {
               echo 'Deploying....'
           }
       }
      post {
    always {
        publishHTML (target: [

              allowMissing: false,
              alwaysLinkToLastBuild: false,
              keepAll: true,
              reportDir: '/var/lib/jenkins/workspace/DemoCypress/cypress/reports/html/',
              reportFiles: "index.html",
              reportName: "Report"])
    }
  }    
}
}
}
